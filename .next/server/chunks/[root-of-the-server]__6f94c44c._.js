module.exports=[70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},94131,(e,t,r)=>{t.exports=e.x("@supabase/supabase-js",()=>require("@supabase/supabase-js"))},16330,e=>{"use strict";e.s(["config",()=>h,"default",()=>g,"handler",()=>y],16330);var t=e.i(26747),r=e.i(90406),a=e.i(44898),n=e.i(62950);e.s(["config",()=>p,"default",()=>c],74463);let s=(0,e.i(94131).createClient)("https://ymrtlcyafzuotngltgcb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InltcnRsY3lhZnp1b3RuZ2x0Z2NiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczMjU4MjAsImV4cCI6MjA3MjkwMTgyMH0.-BgOxU6DJe8wF0N_tbBeNpVmHtvfv0BG6YcuzPLK1Gc"),o={admin:process.env.REACT_APP_ADMIN_EMAIL||"cooper@dronecareerpro.au",contact:process.env.REACT_APP_CONTACT_EMAIL||"cooper@dronecareerpro.au"},i=async(e,t)=>{let r,a=`${process.env.REACT_APP_SUPABASE_URL}/functions/v1/resend-email`;"contact"===e&&(r={from:"onboarding@dronecareerpro.com",to:o.admin,subject:`New Contact Form Submission from ${t.name}`,html:`
        <h2>New Contact Form Submission</h2>
        <p><strong>Name:</strong> ${t.name}</p>
        <p><strong>Email:</strong> ${t.email}</p>
        <p><strong>Phone:</strong> ${t.phone}</p>
        <p><strong>Inquiry Type:</strong> ${t.inquiry_type||"Not specified"}</p>
        <p><strong>Message:</strong></p>
        <p>${t.message}</p>
        <hr>
        <p>Received at: ${new Date().toLocaleString()}</p>
      `});let n=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${process.env.REACT_APP_SUPABASE_ANON_KEY}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok){let e=await n.text();throw console.error("Email function error:",e),Error(e)}return await n.json()},l=async e=>{try{return await i("contact",e)}catch(e){throw console.error("Failed to send contact email:",e),e}};async function c(e,t){if("POST"!==e.method)return t.status(405).json({error:"Method not allowed",message:"This endpoint only accepts POST requests"});try{let{name:r,email:a,phone:n,message:o,inquiryType:i}=e.body;if(!r||!a||!n||!o)return t.status(400).json({error:"Validation Error",message:"Please fill in all required fields (Name, Email, Phone, Message)."});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a))return t.status(400).json({error:"Invalid Email",message:"Please enter a valid email address."});if(!/^[\d\s\-\+\(\)]+$/.test(n))return t.status(400).json({error:"Invalid Phone",message:"Please enter a valid phone number."});let{data:c,error:p}=await s.from("contacts").insert([{name:r,email:a,phone:n,message:o,inquiry_type:i||"general",created_at:new Date().toISOString()}]).select().single();if(p)return console.error("Database error:",p),t.status(500).json({error:"Database Error",message:"Failed to save contact information. Please try again."});try{await l({name:r,email:a,phone:n,message:o,inquiryType:i})}catch(e){console.error("Email sending failed:",e)}return t.status(200).json({success:!0,message:"Thank you for contacting us! We'll get back to you soon.",data:{id:c.id,name:c.name}})}catch(e){return console.error("Contact form submission error:",e),t.status(500).json({error:"Server Error",message:"An unexpected error occurred. Please try again later."})}}let p={api:{bodyParser:{sizeLimit:"1mb"}}};var u=e.i(74463),d=e.i(7031),m=e.i(81927);let g=(0,n.hoist)(u,"default"),h=(0,n.hoist)(u,"config"),f=new a.PagesAPIRouteModule({definition:{kind:r.RouteKind.PAGES_API,page:"/api/contact",pathname:"/api/contact",bundlePath:"",filename:""},userland:u,distDir:".next",relativeProjectDir:""});async function y(e,r,a){let n="/api/contact";n=n.replace(/\/index$/,"")||"/";let s=await f.prepare(e,r,{srcPage:n});if(!s){r.statusCode=400,r.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve());return}let{query:o,params:i,prerenderManifest:l,routerServerContext:c}=s;try{let t=e.method||"GET",a=(0,d.getTracer)(),n=a.getActiveScopeSpan(),s=f.instrumentationOnRequestError.bind(f),p=async n=>f.render(e,r,{query:{...o,...i},params:i,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:l.preview,propagateError:!1,dev:f.isDev,page:"/api/contact",internalRevalidate:null==c?void 0:c.revalidate,onError:(...t)=>s(e,...t)}).finally(()=>{if(!n)return;n.setAttributes({"http.status_code":r.statusCode,"next.rsc":!1});let s=a.getRootSpanAttributes();if(!s)return;if(s.get("next.span_type")!==m.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${s.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=s.get("next.route");if(o){let e=`${t} ${o}`;n.setAttributes({"next.route":o,"http.route":o,"next.span_name":e}),n.updateName(e)}else n.updateName(`${t} ${e.url}`)});n?await p(n):await a.withPropagatedContext(e.headers,()=>a.trace(m.BaseServerSpan.handleRequest,{spanName:`${t} ${e.url}`,kind:d.SpanKind.SERVER,attributes:{"http.method":t,"http.target":e.url}},p))}catch(e){if(f.isDev)throw e;(0,t.sendError)(r,500,"Internal Server Error")}finally{null==a.waitUntil||a.waitUntil.call(a,Promise.resolve())}}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6f94c44c._.js.map